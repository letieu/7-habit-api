import { Router } from 'express' import { CreateTaskDTO, UpdateTaskDTO } from '../dtos/task.dto'
import { authJwt } from '../middlewares'
import { validateDTO } from '../utils/validate'
import { TaskService } from '../services'

const router = Router()
const taskService = new TaskService()

router.post('/', authJwt, async (req, res, next) => {
    try {
        const createDto = await validateDTO(CreateTaskDTO, req.body)
        const task = await taskService.create(createDto)
        res.json(task)
    } catch (e) {
        next(e)
    }
})


export default router
